# GIT原理及使用
## 一、git基本原理：

　　git是一个分布式版本控制系统，因此git的操作大部分都是在本地，除非明确说明下面的原理或者命令都是在本地操作。

每个git项目的根目录下都有一个.git目录，它是git默默进行版本控制时读写的“数据库”。有几个概念需要提一下：

-**工作区**：代码所在的目录，就是自己电脑中能够看到的目录

-**暂存区**：英文叫stage或者index。一般存放在.git/index文件中，所以我们把暂存区也叫作索引index

-**版本库**：工作区有一个隐藏的.git，这个不算工作区，而是GIt的版本库。

 

下图展示了工作区、版本库、和 版本库中的暂存区之间的关系。
![avatar](https://img2020.cnblogs.com/blog/154172/202111/154172-20211128154955686-1532351478.png)
 



--当对工作区修改（或新增）的文件执行`git add`命令时，暂存区的目录树被更新，同时工作区修改（或新增）的文件内容被写入到对象库中的一个新的对象中，而该对象的ID被记录在暂存区的文件索引中。

--当执行`git commit `时，暂存区的目录树 写到版本库(对象库)中，master分支会做相应的更新。即master指向的目录树就是提交时暂存区的目录树。

--当执行` git reset HEAD `命令时，暂存区的目录树会被重写，被master分支指向的目录树所替换，但是工作区不受影响。

--当执行` git rm --cached<file>`命令时，会直接从暂存区删除文件，工作区则不作出改变。

--当执行` git checkout .` 或者` git checkout -- <file>`命令时，会用暂存区全部或指定的文件替换工作区的文件。这个操作很危险，会清楚工作区中未添加到暂存区中的改动。

--当执行`git checkout HEAD .`或者 `git checkout HEAD <file>`命令时，会用HEAD指向的master分支中的全部或者部分文件替换暂存区以及工作区中的文件。这个命令也具有危险性，因为不但会清除工作区中未提交的改动，也会清除暂存区中未提交的改动。

Git将项目存储为4个部分：如下图：
![avatar](https://img2020.cnblogs.com/blog/154172/202111/154172-20211128164015785-774007107.png)
　　

 

**workspace: 工作区（当前用户操作修改的区域）**

**index/stage:暂存区（add后的区域）**

**Repository: 本地仓库区 commit之后的区域**

**remote：远程仓库（push后的区域）**

## 二、工作流程
--克隆Git资源作为工作目录

-->在克隆的资源上添加或修改文件

-->如果他人修改了，你可以更新资源

-->在提交前查看修改

-->提交修改

-->-在修改完成后，如果发现错误，可以撤回提交并再次修改并提交

下图展示了Git的工作流程：
![avatar](https://img2020.cnblogs.com/blog/154172/202111/154172-20211128162654131-1849794365.png)
　　
## 三、git命令详解：


```
什么是仓库：
一个GIT仓库是一个项目的一个虚拟存储。它允许你保存代码的版本，可以在需要时访问这些版本。
```

`git init `初始化一个新的仓库

>要创建新的仓库，我们需要使用`git init `命令。执行此命令将在你当前的工作目录中创建一个新的子目录.git。同时也将创建一个新的主分支。　　

`git clone url`克隆现有的仓库

>如果该项目已在中央仓库中存在，则`clone`命令是用户将项目获取到本地开发的最常见方式。`clone`通常是一次性操作，开发人员获得工作副本后，所有的版本控制操作都通过其本地仓库进行管理。


`git add`添加文件

>将所有更改的文件 提交到暂存区，此举对仓库无任何影响

`git mv`移动或重命名文件，目录或符号链接


`git git rm`从工作区和索引中删除文件

`git commit`添加文件到**本地仓库**



`git push`将本地修改推送到远程库

`git fetch`跟新远程信息库

`git diff`显示提交和工作树等之间的更改

>比较文件的不同，即比较文件在暂存区和工作区的差异，命令显示已写入暂存区和已经被修改单尚未写入暂存区文件对对的区别。

`git clone`拉取远程仓库到本地

`git pill`将远程库最新修改更新到本地

`git status`显示工作目录和暂存区状态
>命令用于查看在上次提交之后，是否有文件进行再次修改，即查看文件修改的状态,
 
`git stash` 命令

>暂时搁置(或隐藏)我们队工作副本所做的更改，以便我们可以处理其他事情，处理完其他事情之后再回来并重新应用他们。
>`git stash`   将更改暂存
>`git stash pop `将更改恢复可以有多个更改暂存
>`git stash list` 查看暂存列表
>`git stash drop `将暂存的更改文件丢弃掉
>`git stash pop stash@{0} `进行恢复第一个暂存

　　　　




